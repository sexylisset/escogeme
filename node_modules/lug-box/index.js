var lugBox = function(){
    var fs = require('fs')

    this.write = write;

    function write(name,data){
        fs.open('../node_modules/lug-box/box/'+name, 'w', function(err) {
            if(err) {
                return console.log(err);
            }
            var x = id.get();
            console.log(x);
            console.log(id.valid(x))

            console.log("The file was saved!");
        });
    }

    function replace(someFile, fine, replace){
        fs.readFile(someFile, 'utf8', function (err,data) {
            if (err) {
                return console.log(err);
            }
            var result = data.replace(/okok/g, replace);
            write(someFile, result);
        });
    }

    function getColection(col){

    }

    function ID(){
        var c = ['asEfb', 'qixn7', '4asss', 'fqv8a', 's8sa2', '2sd54', 'aA2Da', 's4S65', 'KJHAS', 'Kkjha'];
        this.get = function (nw) {
            var n = "" + Math.ceil(Math.random() * 9999);
            var r = "";
            for (var i in n) {
                r += c[n[i]];
            }
            return r
        };
        this.valid = function(id){
            for(var i=0; i<4; i++){
                var p = id.substr((i*5),5);
                console.log(c.indexOf(p));
                if(!c.indexOf(p)<0) return false;
            }
            return true;
        }
    }
    var id = new ID();
}

module.exports = new lugBox();